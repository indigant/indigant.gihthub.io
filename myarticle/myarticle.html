<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MY ARTICLE</title>
<link rel = "stylesheet" href = "../css/myarticlestyle.css">
</head>

<body>
    <div class="topguide">
        <div>
            <a href="../index.html">返回</a>
            <a href="#">个人简介</a>
            <a href="#">联系方式</a>
        </div>
        <div>
            <img class = "Profilephoto" src = "../image/image1.jpg">
        </div>
    </div>

    <div class="show">
        <h1> ACM模板 </h1>
        <h2>Dijkstra</h2>
        <pre><code>
#include &lt;bits/stdc++.h&gt;

using namespace std;

typedef long long ll;
typedef pair &lt;int, int&gt; PII;
const int N = 150000 + 10; //最大点数
const int INF = 0x3f3f3f3f;

int n, m; // n个点，m条边
int h[N], w[N], e[N], ne[N], idx; // 邻接表的头，权重，每条边的起点，终点，当前边的数量
int dist[N]; // 1号点到第i号点的距离
bool st[N]; // 第i个点是否有到1号点的最短路

void add(int a, int b, int c) {
    e[idx] = b; // 第idx条边的起点是b
    w[idx] = c; // 第idx条边的权重是c
    ne[idx] = h[a]; // 第idx条边的终点是h[a]
    h[a] = idx ++;  // h[a] 更新为 idx;
} // 往邻接表添加节点的函数

int dijkstra() {
    memset(dist, INF, sizeof dist); // 初始化
    dist[1] = 0; // 其他节点到1号点的距离初始化为inf，1到自己的距离为0

    priority_queue&lt;PII, vector&lt;PII&gt, greater&lt;PII&gt;&gt; heap; // 用优先队列来制造小根堆
    // 每个元素存放：该节点到1号点的距离，该节点的编号
    heap.push({0, 1}); // 往优先队列里添加第一号点

    while(heap.size()) {
        auto t = heap.top(); // 取出堆顶元素
        heap.pop();

        int ver = t.second, distance = t.first;
        // ver 就是节点编号，distance是到一号点的距离
        if(st[ver]) continue;
        // 如果该节点已经存在最短路，continue
        for(int i = h[ver]; i != -1; i = ne[i]) {
            int j = e[i];
            if(dist[j] > distance + w[i]) {
                dist[j] = distance + w[i];
                heap.push({dist[j], j});
            }
        } // 用当前这个节点去更新每个节点到1号点的距离
        st[ver] = true;
    }

    if(dist[n] == INF) return -1;
    return dist[n];
}

int main () {
    ios::sync_with_stdio(false);
    cin.tie(0);
    cout.tie(0);

    cin >> n >> m;

    memset(h, -1, sizeof h); // 初始化头数组

    while(m --) {
        int a, b, c;
        cin >> a >> b >> c;
        add(a, b, c);
    }

    int t = dijkstra();

    cout &lt; t  &lt;&lt; endl;

    return 0;
}
            </code></pre>
    </div>

</body>

</html>